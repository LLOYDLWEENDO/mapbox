<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Limit geocoder results to a named region</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.css" rel="stylesheet" />
<style>
	body { margin: 0; padding: 0; }
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.min.js"></script>
<link
rel="stylesheet"
href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.css"
type="text/css"
/>
<!-- Promise polyfill script required to use Mapbox GL Geocoder in IE 11 -->
<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>
<div id="map"></div>
 
<script>
	// TO MAKE THE MAP APPEAR YOU MUST
	// ADD YOUR ACCESS TOKEN FROM
	// https://account.mapbox.com
	mapboxgl.accessToken = 'pk.eyJ1IjoibGxveWRsd2VlbmRvIiwiYSI6ImNrNzVjbGUzMjBlNDUzZXNicnhycnpraGwifQ.ZlURI2KWF1ihr57-LNmj8g';
var map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/mapbox/streets-v11',
center: [27.4306751716734,
    -14.0049082837326],
zoom: 5
});
 
map.addControl(
new MapboxGeocoder({
accessToken: mapboxgl.accessToken,
 
// limit results to Australia
countries: 'zm',
 
// further limit results to the geographic bounds representing the region of
// New South Wales
bbox: [21.99996,-18.0764899401506,
    33.7027859987275,
    -8.24150701955748],
 
// apply a client side filter to further limit results to those strictly within
// the New South Wales region
filter: function (item) {
// returns true if item contains New South Wales region
return item.context
.map(function (i) {
// id is in the form {index}.{id} per https://github.com/mapbox/carmen/blob/master/carmen-geojson.md
// this example attempts to find the `region` named `New South Wales`
return (
i.id.split('.').shift() === 'region' &&
i.text === 'Zambia'
);
})
.reduce(function (acc, cur) {
return acc || cur;
});
},
mapboxgl: mapboxgl
})
);
</script>
 
</body>
</html>